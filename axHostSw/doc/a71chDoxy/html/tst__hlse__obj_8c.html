<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A71CH Host Sw: C:/ubuntu_exchange/axHostSw/hostLib/a71ch/tst/tst_hlse_obj.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A71CH Host Sw
   &#160;<span id="projectnumber">v01.05.00</span>
   </div>
   <div id="projectbrief">NXP Semiconductors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tst__hlse__obj_8c.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tst_hlse_obj.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_h_l_s_e_a_p_i_8h_source.html">HLSEAPI.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sm__types_8h_source.html">sm_types.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sm__apdu_8h_source.html">sm_apdu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tst__sm__util_8h_source.html">tst_sm_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a71ch__util_8h_source.html">a71ch_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tst__a71ch__util_8h_source.html">tst_a71ch_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="tst__hlse__a71ch__util_8h_source.html">tst_hlse_a71ch_util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_host_crypto_a_p_i_8h_source.html">HostCryptoAPI.h</a>&quot;</code><br />
</div>
<p><a href="tst__hlse__obj_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac93d99b5d0c13701ed50da6dd2a005a9"><td class="memItemLeft" align="right" valign="top"><a id="ac93d99b5d0c13701ed50da6dd2a005a9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ERR_GP_NO_CERT</b>&#160;&#160;&#160;0x2000</td></tr>
<tr class="separator:ac93d99b5d0c13701ed50da6dd2a005a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3550022502b66cb7fcf8e69567dd2401"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tst__hlse__obj_8c.html#a3550022502b66cb7fcf8e69567dd2401">MAX_BASIC_CERT_SIZE</a>&#160;&#160;&#160;385</td></tr>
<tr class="separator:a3550022502b66cb7fcf8e69567dd2401"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a102c32f0e21af46578f04049f03ad4"><td class="memItemLeft" align="right" valign="top"><a id="a0a102c32f0e21af46578f04049f03ad4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>N_BASIC_CERT</b>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a0a102c32f0e21af46578f04049f03ad4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ba7efe692e0283990b428b1e707043c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tst__hlse__obj_8c.html#a7ba7efe692e0283990b428b1e707043c">N_ADV_CERT</a>&#160;&#160;&#160;255</td></tr>
<tr class="separator:a7ba7efe692e0283990b428b1e707043c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a9bccfac97c80a690e4e6a30cebc96d"><td class="memItemLeft" align="right" valign="top"><a id="a7a9bccfac97c80a690e4e6a30cebc96d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_ADV_CERT_SIZE</b>&#160;&#160;&#160;(4096 - 32)</td></tr>
<tr class="separator:a7a9bccfac97c80a690e4e6a30cebc96d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b505373b3eef6966623228f1b898e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tst__hlse__obj_8c.html#a07b505373b3eef6966623228f1b898e2">N_ADV_OBJ</a>&#160;&#160;&#160;128</td></tr>
<tr class="separator:a07b505373b3eef6966623228f1b898e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05e893a276b3d667656613d253bf251c"><td class="memItemLeft" align="right" valign="top"><a id="a05e893a276b3d667656613d253bf251c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DATA_SIZE_INC</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a05e893a276b3d667656613d253bf251c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7ee042ce765d93ea4b8e4758c84c368"><td class="memItemLeft" align="right" valign="top"><a id="aa7ee042ce765d93ea4b8e4758c84c368"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CERT_SIZE_INC</b>&#160;&#160;&#160;7</td></tr>
<tr class="separator:aa7ee042ce765d93ea4b8e4758c84c368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17fc525efd2711b3c86761f245a56870"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tst__hlse__obj_8c.html#a17fc525efd2711b3c86761f245a56870">N_UC1_CERT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a17fc525efd2711b3c86761f245a56870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a827cdeb0459938c0ad01417008fb52fa"><td class="memItemLeft" align="right" valign="top"><a id="a827cdeb0459938c0ad01417008fb52fa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>N_UC1_OBJ</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a827cdeb0459938c0ad01417008fb52fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457f4310b5341b985a7d01f34ffa1db8"><td class="memItemLeft" align="right" valign="top"><a id="a457f4310b5341b985a7d01f34ffa1db8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UC1_CERT0_SIZE</b>&#160;&#160;&#160;512</td></tr>
<tr class="separator:a457f4310b5341b985a7d01f34ffa1db8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a431f6485079a604aed002de595d16c90"><td class="memItemLeft" align="right" valign="top"><a id="a431f6485079a604aed002de595d16c90"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UC1_OBJ0_SIZE</b>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a431f6485079a604aed002de595d16c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab40ec9b528bd3de98c42477b8c03aafc"><td class="memItemLeft" align="right" valign="top"><a id="ab40ec9b528bd3de98c42477b8c03aafc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UC1_OBJ1_SIZE</b>&#160;&#160;&#160;(4096 - UC1_CERT0_SIZE - UC1_OBJ0_SIZE - 32)</td></tr>
<tr class="separator:ab40ec9b528bd3de98c42477b8c03aafc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b881f3d3179c163b49988f6e429d16"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tst__hlse__obj_8c.html#a78b881f3d3179c163b49988f6e429d16">N_UC2_CERT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a78b881f3d3179c163b49988f6e429d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa13170e1c813b1dca5de2a2eed1e8222"><td class="memItemLeft" align="right" valign="top"><a id="aa13170e1c813b1dca5de2a2eed1e8222"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>N_UC2_OBJ</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:aa13170e1c813b1dca5de2a2eed1e8222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab81bd9206f5203841286d67dcc56b867"><td class="memItemLeft" align="right" valign="top"><a id="ab81bd9206f5203841286d67dcc56b867"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UC2_CERT0_SIZE</b>&#160;&#160;&#160;512</td></tr>
<tr class="separator:ab81bd9206f5203841286d67dcc56b867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a991f9f7cefc5d998c88759a5f96b6776"><td class="memItemLeft" align="right" valign="top"><a id="a991f9f7cefc5d998c88759a5f96b6776"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UC2_OBJ0_SIZE</b>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a991f9f7cefc5d998c88759a5f96b6776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac97b189b962cd970c77dae019167b16a"><td class="memItemLeft" align="right" valign="top"><a id="ac97b189b962cd970c77dae019167b16a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>UC2_OBJ1_SIZE</b>&#160;&#160;&#160;(4096 - UC2_CERT0_SIZE - UC2_OBJ0_SIZE - 32)</td></tr>
<tr class="separator:ac97b189b962cd970c77dae019167b16a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73ff1e08eefe5305e00addba46264cc5"><td class="memItemLeft" align="right" valign="top"><a id="a73ff1e08eefe5305e00addba46264cc5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_CERT_HANDLE</b>&#160;&#160;&#160;255</td></tr>
<tr class="separator:a73ff1e08eefe5305e00addba46264cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45687013ee2655c8bcb821dd62e5669a"><td class="memItemLeft" align="right" valign="top"><a id="a45687013ee2655c8bcb821dd62e5669a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_DATA_HANDLE</b>&#160;&#160;&#160;255</td></tr>
<tr class="separator:a45687013ee2655c8bcb821dd62e5669a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15c33bf1ebd6bc47d06aec32018fdd30"><td class="memItemLeft" align="right" valign="top"><a id="a15c33bf1ebd6bc47d06aec32018fdd30"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LEN_SHORT_FORM_MAX</b>&#160;&#160;&#160;127</td></tr>
<tr class="separator:a15c33bf1ebd6bc47d06aec32018fdd30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a644f84f62020eeb20105f09f2a958d8b"><td class="memItemLeft" align="right" valign="top"><a id="a644f84f62020eeb20105f09f2a958d8b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LEN_LONG_FORM_ONE_BYTE_MAX</b>&#160;&#160;&#160;255</td></tr>
<tr class="separator:a644f84f62020eeb20105f09f2a958d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafede19a8224b66f29596ef10ac69d8d"><td class="memItemLeft" align="right" valign="top"><a id="aafede19a8224b66f29596ef10ac69d8d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LEN_LONG_FORM_TWO_BYTE_MAX</b>&#160;&#160;&#160;65536</td></tr>
<tr class="separator:aafede19a8224b66f29596ef10ac69d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a772bbea19962e0a9104b1ffb93156349"><td class="memItemLeft" align="right" valign="top"><a id="a772bbea19962e0a9104b1ffb93156349"></a>
static U8&#160;</td><td class="memItemRight" valign="bottom"><b>tstCertCreationBasic</b> (U8 initMode)</td></tr>
<tr class="separator:a772bbea19962e0a9104b1ffb93156349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a679b91e640eccd788457e4a6cad13db7"><td class="memItemLeft" align="right" valign="top"><a id="a679b91e640eccd788457e4a6cad13db7"></a>
static U8&#160;</td><td class="memItemRight" valign="bottom"><b>tstCertCreationAdv</b> (U8 initMode, U16 nBaseCertSize, U16 nCert)</td></tr>
<tr class="separator:a679b91e640eccd788457e4a6cad13db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318f55941a3d9d4ef4e561113cc4d6de"><td class="memItemLeft" align="right" valign="top"><a id="a318f55941a3d9d4ef4e561113cc4d6de"></a>
static U8&#160;</td><td class="memItemRight" valign="bottom"><b>tstMixedCreationDeletion</b> (U8 initMode, U16 nBaseCertSize, U16 nCert)</td></tr>
<tr class="separator:a318f55941a3d9d4ef4e561113cc4d6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa84808890de5914c821e86d15a35a00"><td class="memItemLeft" align="right" valign="top">static U8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tst__hlse__obj_8c.html#aaa84808890de5914c821e86d15a35a00">tstFillGpMemory</a> (U8 initMode, U16 nBaseCertSize, U16 nCert)</td></tr>
<tr class="separator:aaa84808890de5914c821e86d15a35a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd94550c286ed88ae286ebbd4f859ab"><td class="memItemLeft" align="right" valign="top">static U8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tst__hlse__obj_8c.html#aacd94550c286ed88ae286ebbd4f859ab">tstHandlingWithLockedSegments</a> (U8 initMode, U8 nPaddedSegments, U16 nBaseCertSize, U16 nCert)</td></tr>
<tr class="separator:aacd94550c286ed88ae286ebbd4f859ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70bc4f0ddf525ed4a2ea70aefd417ad9"><td class="memItemLeft" align="right" valign="top"><a id="a70bc4f0ddf525ed4a2ea70aefd417ad9"></a>
static U8&#160;</td><td class="memItemRight" valign="bottom"><b>tstUseCase1</b> (U8 initMode)</td></tr>
<tr class="separator:a70bc4f0ddf525ed4a2ea70aefd417ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad14d8af1939f2e384b8d1231e6d1f1c7"><td class="memItemLeft" align="right" valign="top"><a id="ad14d8af1939f2e384b8d1231e6d1f1c7"></a>
static U8&#160;</td><td class="memItemRight" valign="bottom"><b>tstUseCase2</b> (U8 initMode)</td></tr>
<tr class="separator:ad14d8af1939f2e384b8d1231e6d1f1c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b12e187e4a56a5566bc8fdbca097f2"><td class="memItemLeft" align="right" valign="top"><a id="af1b12e187e4a56a5566bc8fdbca097f2"></a>
static U8&#160;</td><td class="memItemRight" valign="bottom"><b>intFillGpMemory</b> (U16 nBaseCertSize, U16 nObj)</td></tr>
<tr class="separator:af1b12e187e4a56a5566bc8fdbca097f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33ff8bb9157590a6d5eb0f7a315146a4"><td class="memItemLeft" align="right" valign="top"><a id="a33ff8bb9157590a6d5eb0f7a315146a4"></a>
static <a class="el" href="group__ghlse__types.html#gad08b6cf58499e5abe79fd24b1927fb67">HLSE_RET_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getCertificate</b> (int certIndex, U8 *clientCertDer, U16 *clientCertDerLen)</td></tr>
<tr class="separator:a33ff8bb9157590a6d5eb0f7a315146a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98e5d8bf6f430e4b3f87139a2ff2403f"><td class="memItemLeft" align="right" valign="top"><a id="a98e5d8bf6f430e4b3f87139a2ff2403f"></a>
static <a class="el" href="group__ghlse__types.html#gad08b6cf58499e5abe79fd24b1927fb67">HLSE_RET_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getData</b> (int dataIndex, U8 *data, U16 *dataLen)</td></tr>
<tr class="separator:a98e5d8bf6f430e4b3f87139a2ff2403f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b1ba15683000723bcd8b8da391d3309"><td class="memItemLeft" align="right" valign="top"><a id="a6b1ba15683000723bcd8b8da391d3309"></a>
static <a class="el" href="group__ghlse__types.html#gad08b6cf58499e5abe79fd24b1927fb67">HLSE_RET_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getDataObjOrCertificate</b> (int index, U8 *data, U16 *len, <a class="el" href="group__ghlse__types.html#ga151970919e95335f3e870a47aa313c23">HLSE_OBJECT_HANDLE</a> *handles, U16 handlesNum)</td></tr>
<tr class="separator:a6b1ba15683000723bcd8b8da391d3309"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1098d18bf786d57f460bfaf2389986d9"><td class="memItemLeft" align="right" valign="top"><a id="a1098d18bf786d57f460bfaf2389986d9"></a>
static <a class="el" href="group__ghlse__types.html#gad08b6cf58499e5abe79fd24b1927fb67">HLSE_RET_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>patchCertificateInitialTL</b> (U8 *clientCertDer, U16 clientCertDerLen)</td></tr>
<tr class="separator:a1098d18bf786d57f460bfaf2389986d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4820e1daf2ee6e326ed50bec8566ae"><td class="memItemLeft" align="right" valign="top"><a id="a7f4820e1daf2ee6e326ed50bec8566ae"></a>
static <a class="el" href="group__ghlse__types.html#gad08b6cf58499e5abe79fd24b1927fb67">HLSE_RET_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>deleteDataObject</b> (int dataIndex)</td></tr>
<tr class="separator:a7f4820e1daf2ee6e326ed50bec8566ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aaa5b25972a0a00dcb331677c767f74"><td class="memItemLeft" align="right" valign="top"><a id="a4aaa5b25972a0a00dcb331677c767f74"></a>
static <a class="el" href="group__ghlse__types.html#gad08b6cf58499e5abe79fd24b1927fb67">HLSE_RET_CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>partialUpdateDataObject</b> (int dataIndex, U16 offset, U8 *data, U16 dataLen)</td></tr>
<tr class="separator:a4aaa5b25972a0a00dcb331677c767f74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4eec2bd70e0bea18ed40574d7df01fd"><td class="memItemLeft" align="right" valign="top">U8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tst__hlse__obj_8c.html#ab4eec2bd70e0bea18ed40574d7df01fd">tstHlseObj</a> ()</td></tr>
<tr class="separator:ab4eec2bd70e0bea18ed40574d7df01fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>NXP Semiconductors </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section user"><dt>License</dt><dd>Copyright 2018 NXP</dd></dl>
<p>This software is owned or controlled by NXP and may only be used strictly in accordance with the applicable license terms. By expressly accepting such terms or by downloading, installing, activating and/or otherwise using the software, you are agreeing that you have read, and that you agree to comply with and are bound by, such license terms. If you do not agree to be bound by the applicable license terms, then you may not retain, install, activate or otherwise use the software.</p>
<dl class="section user"><dt>Description</dt><dd>Testing Storage of Data and Certificate objects </dd></dl>

<p class="definition">Definition in file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3550022502b66cb7fcf8e69567dd2401"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3550022502b66cb7fcf8e69567dd2401">&#9670;&nbsp;</a></span>MAX_BASIC_CERT_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BASIC_CERT_SIZE&#160;&#160;&#160;385</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test creation of certificate objects:</p>
<p>Simulate the following scenario and verify it works correctly:</p>
<ul>
<li>Create N_BASIC_CERT Certificates with variable sizes and random content (Ensure to patch the initial TL!)</li>
<li>Read back certificate data and verify correctness</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">initMode</td><td>Visit the documentation of <a class="el" href="tst__a71ch__util_8c.html#a4777eab8462a47aedf4a809f20f4a799">a71chInitModule</a> for more information on this parameter </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tst__hlse__obj_8c_source.html#l00159">159</a> of file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>

</div>
</div>
<a id="a7ba7efe692e0283990b428b1e707043c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ba7efe692e0283990b428b1e707043c">&#9670;&nbsp;</a></span>N_ADV_CERT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_ADV_CERT&#160;&#160;&#160;255</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test creation of certificate objects (more advanced variant; may not work on all host platforms).</p>
<p>Simulate the following scenario and verify it works correctly:</p>
<ul>
<li>Create N_BASIC_CERT Certificates with variable sizes and random content (Ensure to patch the initial TL!)</li>
<li>Read back certificate data and verify correctness</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">initMode</td><td>Visit the documentation of <a class="el" href="tst__a71ch__util_8c.html#a4777eab8462a47aedf4a809f20f4a799">a71chInitModule</a> for more information on this parameter </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tst__hlse__obj_8c_source.html#l00271">271</a> of file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>

</div>
</div>
<a id="a07b505373b3eef6966623228f1b898e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b505373b3eef6966623228f1b898e2">&#9670;&nbsp;</a></span>N_ADV_OBJ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_ADV_OBJ&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test creation/deletion of mixed objects (more advanced variant; may not work on all host platforms). Go on creating objects until GP storage is full, predict/verify when this will occur. Use random data &amp; increments on a base size for both certificates and data.</p>
<ul>
<li>Create 2 certificates for every data object (Ensure to patch the initial TL of the certs!)</li>
<li>Go on writing objects until the GP storage is full (try to add the object that doesn't fit anymore)</li>
<li>Read back certs/data and verify correctness</li>
<li>Delete one random object (not implemented!)</li>
<li>Try to add an object that does not fit (not implemented!)</li>
<li>Add an object that will fit (not implemented!)</li>
<li>Read back certs/data and verify correctness (not implemented!)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">initMode</td><td>Visit the documentation of <a class="el" href="tst__a71ch__util_8c.html#a4777eab8462a47aedf4a809f20f4a799">a71chInitModule</a> for more information on this parameter </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tst__hlse__obj_8c_source.html#l00399">399</a> of file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>

</div>
</div>
<a id="a17fc525efd2711b3c86761f245a56870"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17fc525efd2711b3c86761f245a56870">&#9670;&nbsp;</a></span>N_UC1_CERT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_UC1_CERT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use Case 1 Refer to document A71CH_ObjectStorageUseCases for illustration</p>
<p>During trust provisioning certificates and data objects are written into GP Storage. The complete GP Storage has been locked. In the Operational phase GP storage is used as a Read Only object storage space.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">initMode</td><td>Visit the documentation of <a class="el" href="tst__a71ch__util_8c.html#a4777eab8462a47aedf4a809f20f4a799">a71chInitModule</a> for more information on this parameter </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tst__hlse__obj_8c_source.html#l00821">821</a> of file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>

</div>
</div>
<a id="a78b881f3d3179c163b49988f6e429d16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b881f3d3179c163b49988f6e429d16">&#9670;&nbsp;</a></span>N_UC2_CERT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define N_UC2_CERT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use Case 2 Refer to document A71CH_ObjectStorageUseCases for illustration</p>
<p>During trust provisioning certificates and data objects are written into GP Storage. The complete GP Storage has been locked - with the exception of the data object on index 1. For this data object only the first segment has been locked In the Operational phase GP storage is used as a Read Only object storage space for cert @ index = 0 data object @ index = 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">initMode</td><td>Visit the documentation of <a class="el" href="tst__a71ch__util_8c.html#a4777eab8462a47aedf4a809f20f4a799">a71chInitModule</a> for more information on this parameter </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tst__hlse__obj_8c_source.html#l01070">1070</a> of file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aaa84808890de5914c821e86d15a35a00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa84808890de5914c821e86d15a35a00">&#9670;&nbsp;</a></span>tstFillGpMemory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static U8 tstFillGpMemory </td>
          <td>(</td>
          <td class="paramtype">U8&#160;</td>
          <td class="paramname"><em>initMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U16&#160;</td>
          <td class="paramname"><em>nBaseCertSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U16&#160;</td>
          <td class="paramname"><em>nObj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Test creation of mixed data objects and certificate objects (more advanced variant; may not work on all host platforms). to fill up total GP memory</p>
<p>Simulate the following scenario and verify it works correctly:</p>
<ul>
<li>Create maximum possible number of Certificates and Data Objects with variable sizes and random content until Gp Memory is completely filled (Ensure to patch the initial TL! on certificates)</li>
<li>Read back and verify correctness</li>
<li>Delete a random number of certificates</li>
<li>Verify the remaining certificates are still ok</li>
<li>refill Gp Storage with Data objects, till Gp Memory is full again</li>
<li>Verify all objects are OK</li>
<li>Delete random number of objects and certs again</li>
<li>Verify contents of remaining objects</li>
<li>Delete all objects</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">initMode</td><td>Visit the documentation of <a class="el" href="tst__a71ch__util_8c.html#a4777eab8462a47aedf4a809f20f4a799">a71chInitModule</a> for more information on this parameter </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nBaseCertSize</td><td>Actual certificate size will be derived from this base value </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nObj</td><td>Amount of certificates </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tst__hlse__obj_8c_source.html#l00627">627</a> of file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>

</div>
</div>
<a id="aacd94550c286ed88ae286ebbd4f859ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacd94550c286ed88ae286ebbd4f859ab">&#9670;&nbsp;</a></span>tstHandlingWithLockedSegments()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static U8 tstHandlingWithLockedSegments </td>
          <td>(</td>
          <td class="paramtype">U8&#160;</td>
          <td class="paramname"><em>initMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U8&#160;</td>
          <td class="paramname"><em>nPaddedSegments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U16&#160;</td>
          <td class="paramname"><em>nBaseCertSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U16&#160;</td>
          <td class="paramname"><em>nObj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Motivation : We want to support the case where problem was found when 2 certificates were provisioned with unknown length indication in the table (0x8000) but an actual free chunk is left between them - and the whole memory of both certificates is locked</p><ul>
<li>this caused an bug: if adding a new small object which could be stored in the empty chunk between them, since it is locked resulting with an erroneous GP table with the object although it was not able to write it actually.</li>
</ul>
<p>Test case : where we want to add a new object and the allocation system encounters a case where the suggested first chunk for this object is locked in this case we expect the allocation system to find the next available chunk until an unlocked chunk is found Scenario: User provisions as follows:</p><ul>
<li>Create a certificate at offset 0x0000 which occupies 16 chunks =16*32 bytes, actual size in TLV Header encode it in the cert as occupying only 15 chunks</li>
<li>Create a second certificate as above at offset 0x0200</li>
<li>Lock certicate gp storage area of 32 chunks</li>
<li>Note :chunk 16 at offset 0x1C0+0x20 = 0x1E0 is locked between first and begining of second cert also chunk 32 at offset 0x200+0x1E0= 0x3E0 is locked after second certificate First free unlocked chunk (usable area to write objects) is at offset 0x400</li>
<li>User provisions also the gp table with the 2 certificates with unknown length</li>
</ul>
<p>Now test various object additions and deletions ( as in tstFillGpMemory ) internally this means the allocation system will now have to retrieve the actual length of the first certificate from it's TLV, where it is only 15 chunks so the system will try to use the 16'th chunk for the object , but this chunk is locked so should skip to the next suggested next chunk</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">initMode</td><td>Visit the documentation of::a71chInitModule for more information on this parameter </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nPaddedSegments</td><td>number of padded segemnts after each certificate </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nBaseCertSize</td><td>base object size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nObj</td><td>num of object to create </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="tst__hlse__obj_8c_source.html#l00673">673</a> of file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>

</div>
</div>
<a id="ab4eec2bd70e0bea18ed40574d7df01fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4eec2bd70e0bea18ed40574d7df01fd">&#9670;&nbsp;</a></span>tstHlseObj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 tstHlseObj </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Test usage of certificate and data objects </p>

<p class="definition">Definition at line <a class="el" href="tst__hlse__obj_8c_source.html#l00067">67</a> of file <a class="el" href="tst__hlse__obj_8c_source.html">tst_hlse_obj.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_334bf0e2cc3331174eefb01118a0a83d.html">hostLib</a></li><li class="navelem"><a class="el" href="dir_ceffb261bb5d756d1931d3d27f14ec57.html">a71ch</a></li><li class="navelem"><a class="el" href="dir_18319be2c3acd0bef40750145bae0f16.html">tst</a></li><li class="navelem"><a class="el" href="tst__hlse__obj_8c.html">tst_hlse_obj.c</a></li>
    <li class="footer">Generated on Fri Sep 7 2018 19:24:07 for A71CH Host Sw by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
