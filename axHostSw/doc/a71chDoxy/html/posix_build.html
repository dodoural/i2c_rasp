<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A71CH Host Sw: i.MX6UL/POSIX Build</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A71CH Host Sw
   &#160;<span id="projectnumber">v01.05.00</span>
   </div>
   <div id="projectbrief">NXP Semiconductors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('posix_build.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">i.MX6UL/POSIX Build </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="build_info_general_intro"></a>
Introduction</h1>
<p>The Host SW package for i.MX6UL is bundled with two different build approaches. The preferred build approach is based upon cmake/make. A deprecated approach relying on one makefile is also included.</p>
<h1><a class="anchor" id="build_info_general_cmake"></a>
cmake</h1>
<h2><a class="anchor" id="build_info_general_cmake_intro"></a>
Introduction</h2>
<p>Completing all steps as outlined in <a class="el" href="posix_build.html#build_info_general_cmake_using">Using cmake on the embedded platform</a> resuls in the following:</p><ul>
<li>A set of shared libraries is created in location /usr/local/lib (also to be used for custom programs)</li>
<li>A set of applications is created in location /user/local/bin (linked to the shared libraries in /usr/local/lib)</li>
<li>A set of header files is created in location /usr/local/include</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The platform suffix (in this case _imx) has been dropped for both shared libraries and applications (as compared to the legacy approach using Makefile_A71CH).</dd>
<dd>
Building the RJCT server or the OpenSSL engine is not yet supported through cmake.</dd></dl>
<p>The following provides a view on the resulting file system structure </p><pre class="fragment">/usr/local
├── bin
│   ├── a71chConfig_i2c
│   ├── a71chEx_i2c
│   └── a71chHlseEx_i2c
│
├── include
│   ├── a71_debug.h
│   ├── a71ch_api.h
│   ├── a71ch_const.h
│   ├── a71ch_util.h
│   ├── apduComm.h
│   ├── ax_api.h
│   ├── ax_common.h
│   ├── ax_scp.h
│   ├── axHostCrypto.h
│   ├── global_platf.h
│   ├── hcAsn.h
│   ├── HLSEAPI.h
│   ├── HLSEComm.h
│   ├── HLSECrypto.h
│   ├── HLSEMisc.h
│   ├── HLSEObjects.h
│   ├── HLSETypes.h
│   ├── HostCryptoAPI.h
│   ├── sci2c.h
│   ├── scp.h
│   ├── sm_apdu.h
│   ├── sm_errors.h
│   ├── sm_types.h
│   └── smCom.h
└── lib
    ├── libA71CH_i2c.so -&gt; libA71CH_i2c.so.1
    ├── libA71CH_i2c.so.1 -&gt; libA71CH_i2c.so.1.4.0
    ├── libA71CH_i2c.so.1.4.0
    ├── libHLSE_A71CH_i2c.so -&gt; libHLSE_A71CH_i2c.so.1
    ├── libHLSE_A71CH_i2c.so.1 -&gt; libHLSE_A71CH_i2c.so.1.0.0
    └── libHLSE_A71CH_i2c.so.1.0.0
</pre><h2><a class="anchor" id="build_info_general_cmake_using"></a>
Using cmake on the embedded platform</h2>
<dl class="section note"><dt>Note</dt><dd>The SD card (downloadable from www.nxp.com/a71ch) comes with all shared libraries pre-installed. The following section contains background information on the procedure used. All commands are to be run on the embedded system.</dd></dl>
<p>Create a directory called 'build_i2c' at the same level as the directory 'hostLib'. Issue cmake with the appropriate command line arguments from within this directory. </p><pre class="fragment">cd /home/root/axHostSw
mkdir build_i2c
ls -l 
    build_i2c
    doc
    hostLib
    linux
cd build_i2c
cmake -DUSE_SMCOM_I2C=ON ../hostLib
</pre><p>The last command results in the following output in the console of the i.MX6UL platform </p><pre class="fragment">root@imx6ulevk:~/axHostSw/build_i2c# cmake -DUSE_SMCOM_I2C=ON ../hostLib
-- The C compiler identification is GNU 6.2.0
-- The CXX compiler identification is GNU 6.2.0
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found OpenSSL: /usr/lib/libssl.so;/usr/lib/libcrypto.so (found version "1.0.2j") 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/root/axHostSw/build_i2c
</pre><p>Issue a simple make command from within the 'build_i2c' directory. </p><pre class="fragment">make
</pre><p>This command results in the following output in the console of the i.MX6UL platform (several repetitive lines removed) </p><pre class="fragment">root@imx6ulevk:~/axHostSw/build_i2c# make
Scanning dependencies of target A71CH_i2c
[  0%] Building C object a71ch/CMakeFiles/A71CH_i2c.dir/__/libCommon/scp/scp.c.o
[  1%] Building C object a71ch/CMakeFiles/A71CH_i2c.dir/__/libCommon/infra/sm_apdu.c.o
...
[ 19%] Building C object a71ch/CMakeFiles/A71CH_i2c.dir/__/libCommon/smCom/smCom.c.o
[ 20%] Linking C shared library libA71CH_i2c.so
[ 20%] Built target A71CH_i2c
Scanning dependencies of target HLSE_A71CH_i2c
[ 21%] Building C object api/CMakeFiles/HLSE_A71CH_i2c.dir/src/A71HLSEWrapper.c.o
[ 21%] Linking C shared library libHLSE_A71CH_i2c.so
[ 21%] Built target HLSE_A71CH_i2c
Scanning dependencies of target a71chConfig_i2c
[ 22%] Building C object CMakeFiles/a71chConfig_i2c.dir/a71ch/app/configCli.c.o
...
[ 62%] Building C object CMakeFiles/a71chConfig_i2c.dir/tstUtil/app_boot.c.o
[ 63%] Linking C executable a71chConfig_i2c
[ 63%] Built target a71chConfig_i2c
Scanning dependencies of target a71chHlseEx_i2c
[ 64%] Building C object CMakeFiles/a71chHlseEx_i2c.dir/a71ch/ex_hlse/ex_hlse_aes.c.o
...
[ 82%] Building C object CMakeFiles/a71chHlseEx_i2c.dir/a71ch/ex_hlse/mainA71CH_hlse.c.o
[ 83%] Linking C executable a71chHlseEx_i2c
[ 83%] Built target a71chHlseEx_i2c
Scanning dependencies of target a71chEx_i2c
[ 84%] Building C object CMakeFiles/a71chEx_i2c.dir/a71ch/ex/ex_aes.c.o
...
[ 98%] Building C object CMakeFiles/a71chEx_i2c.dir/tstUtil/hkdf.c.o
[ 98%] Building C object CMakeFiles/a71chEx_i2c.dir/tstUtil/app_boot.c.o
[ 99%] Building C object CMakeFiles/a71chEx_i2c.dir/a71ch/ex/mainA71CH.c.o
[100%] Linking C executable a71chEx_i2c
[100%] Built target a71chEx_i2c
</pre><p>After a successful make command, issue 'make install' to install relevant binaries, libraries and header files into /usr/local. </p><pre class="fragment">make install
</pre><p>This command results in the following output in the console of the i.MX6UL platform </p><pre class="fragment">root@imx6ulevk:~/axHostSw/build_i2c# make install
[ 20%] Built target A71CH_i2c
[ 21%] Built target HLSE_A71CH_i2c
[ 63%] Built target a71chConfig_i2c
[ 83%] Built target a71chHlseEx_i2c
[100%] Built target a71chEx_i2c
Install the project...
-- Install configuration: ""
-- Installing: /usr/local/bin/a71chConfig_i2c
-- Set runtime path of "/usr/local/bin/a71chConfig_i2c" to "/usr/local/lib"
-- Installing: /usr/local/bin/a71chEx_i2c
-- Set runtime path of "/usr/local/bin/a71chEx_i2c" to "/usr/local/lib"
-- Installing: /usr/local/bin/a71chHlseEx_i2c
-- Set runtime path of "/usr/local/bin/a71chHlseEx_i2c" to "/usr/local/lib"
-- Installing: /usr/local/lib/libA71CH_i2c.so.1.4.0
-- Installing: /usr/local/lib/libA71CH_i2c.so.1
-- Installing: /usr/local/lib/libA71CH_i2c.so
-- Set runtime path of "/usr/local/lib/libA71CH_i2c.so.1.4.0" to "/usr/local/lib"
-- Installing: /usr/local/include/a71ch_api.h
-- Installing: /usr/local/include/a71ch_const.h
-- Installing: /usr/local/include/a71ch_util.h
-- Installing: /usr/local/include/ax_api.h
-- Installing: /usr/local/include/ax_common.h
-- Installing: /usr/local/include/ax_scp.h
-- Installing: /usr/local/include/axHostCrypto.h
-- Installing: /usr/local/include/HostCryptoAPI.h
-- Installing: /usr/local/include/global_platf.h
-- Installing: /usr/local/include/hcAsn.h
-- Installing: /usr/local/include/sm_apdu.h
-- Installing: /usr/local/include/sm_types.h
-- Installing: /usr/local/include/sm_errors.h
-- Installing: /usr/local/include/scp.h
-- Installing: /usr/local/include/smCom.h
-- Installing: /usr/local/include/apduComm.h
-- Installing: /usr/local/include/a71_debug.h
-- Installing: /usr/local/include/sci2c.h
-- Installing: /usr/local/lib/libHLSE_A71CH_i2c.so.1.0.0
-- Installing: /usr/local/lib/libHLSE_A71CH_i2c.so.1
-- Installing: /usr/local/lib/libHLSE_A71CH_i2c.so
-- Set runtime path of "/usr/local/lib/libHLSE_A71CH_i2c.so.1.0.0" to "/usr/local/lib"
-- Installing: /usr/local/include/HLSEAPI.h
-- Installing: /usr/local/include/HLSEComm.h
-- Installing: /usr/local/include/HLSECrypto.h
-- Installing: /usr/local/include/HLSEMisc.h
-- Installing: /usr/local/include/HLSEObjects.h
-- Installing: /usr/local/include/HLSETypes.h
</pre><h2><a class="anchor" id="build_info_general_cmake_socket"></a>
Using cmake to create binaries with smComSocket support</h2>
<p>In cygwin or on a Linux PC, one can invoke cmake to build and install binaries with smComSocket support: </p><pre class="fragment">cd &lt;your_path&gt;/axHostSw
mkdir build_socket
ls -l 
    build_socket
    doc
    hostLib
    linux
cd build_socket
cmake -DUSE_SMCOM_SOCKET=ON ../hostLib
make
make install
</pre><dl class="section note"><dt>Note</dt><dd>You may have to install cmake on the Linux PC or Cygwin.</dd>
<dd>
To use the applications linked to the shared libraries on cygwin, ensure the path containing the shared libraries is in the search path. E.g. to invoke the config tool: <pre class="fragment">PATH=/usr/local/lib:$PATH /usr/local/bin/a71chConfig_socket.exe 192.168.2.70:8050
</pre></dd></dl>
<h2><a class="anchor" id="build_info_general_cmake_crosscompile"></a>
Using cmake to cross compile</h2>
<p>An example toolchain file for the iMX6UL cross compiler (hostLib/ToolchainFile_imx6.cmake) is included in the Host Sw package. It may have to be updated to reflect the location of the cross compilation environment.</p>
<p>To invoke cmake to use the cross compiler to build the binaries for the embedded platform. </p><pre class="fragment">"First prepare environment for cross-compilation, e.g."
source /opt/fsl-imx-fb/4.9.11-1.0.0/environment-setup-cortexa7hf-neon-poky-linux-gnueabi
cd &lt;your_path&gt;/axHostSw
mkdir build_i2c_cc
ls -l 
    build_i2c_cc
    doc
    hostLib
    linux
cd build_i2c_cc
cmake -DUSE_SMCOM_I2C=ON -DCMAKE_TOOLCHAIN_FILE=../hostLib/ToolchainFile_imx6.cmake ../hostLib
make
sudo make DESTDIR=$SDKTARGETSYSROOT install
</pre><p>Take special care on transferring/installing the resulting binaries and header files on the actual embedded platform.</p>
<h1><a class="anchor" id="build_info_general_linking_to_openssl_engine"></a>
Application linking to OpenSSL Engine</h1>
<p>To ensure the OpenSSL engine is used at run-time by an application be sure to define the flag <code>OPENSSL_LOAD_CONF</code> when compiling the application. Please check the makefiles provided with the examples (e.g. <a class="el" href="a71ch_tls_client_8c.html">a71chTlsClient.c</a>) for further details. More information on the OpenSSL engine is available in the document 'A71CH OpenSSL Engine [um4334**]'.</p>
<p>An application linked against the A71CH OpenSSL engine, must also be linked against the A71CH Host Library.</p>
<h1><a class="anchor" id="legacy_deprecated_makefile"></a>
Legacy (*deprecated*) Makefile approach</h1>
<p>For the makefile only approach, the makefile can be found in the directory ~/…/axHostSw/linux: Makefile_A71CH. Depending on the platform one is compiling for and build target one wants to create one needs to invoke this makefile with additional arguments. For the cmake/make approach, refer to <a class="el" href="posix_build.html#build_info_general_cmake">cmake</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Invoking the makefile with wrong arguments (or unsupported parameter combinations) will result in the build process generating obscure error messages.</dd></dl>
<p>In general the Makefile is compatible with POSIX compliant platforms with a gcc compiler suite installed. Most targets assume the OpenSSL 1.0.x library (also the development files) is available on the platform.</p>
<p>In what follows we highlight one or two possible targets per platform. In <a class="el" href="posix_build.html#build_info_general_all_possible_targets">Overview of all possible targets</a> more targets are listed.</p>
<p>When compiling or cross-compiling for iMX (ensure you have correctly initialized the environment for cross-compilation first, refer to <a class="el" href="page_imx6ul.html">Setup i.MX6ULEVK</a> for more information) the following invocation builds the API example application (statically linking in all required A71CH Host Library source files). </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH default app=A71CH conn=i2c platf=imx
</pre><p>The resulting application is called <code>A71CH_i2c_imx</code> and can be started as follows: </p><pre class="fragment">&gt;&gt; ./A71CH_i2c_imx
</pre><p>Again compiling or cross-compiling for iMX the following invocation builds an RJCT_Server for the iMX platform. Such an RJCT server allows e.g. the Configure Tool to run on a Development PC and to connect via the iMX platform to an A71CH (connected via I2C to the iMX platform). </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH default app=RJCT_A71 conn=i2c platf=imx
</pre><p>The resulting application is called <code>rjct_a71_i2c_imx</code> and can be started as follows: </p><pre class="fragment">root@imx6ulevk:~# ./rjct_a71_i2c_imx
RemoteJCShell Terminal Server (supporting SCI2C) Rev 0.92
A71 (I2C_CLK_MAX = 400 kHz) - Effective Master Clock depends on Host Platform.

Establish a connection via JCShell:
        /term Remote|&lt;ip-address&gt;:&lt;port&gt;
         e.g.
         /term Remote|192.168.1.27:8050

Server: waiting for connections...
</pre><p>When compiling on Cygwin the following invocation builds the Configure tool. </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH default app=A71CH_CONFIG conn=socket platf=native
</pre><p>The resulting application is called <code>a71chConfig_socket_native.exe</code> and can be started as shown below. In this case connecting to the RJCT_Server running on e.g. the iMX6 platform (with IP address 192.168.1.64). Please adapt the IP address to match your setup. The <code>info</code> <code>device</code> arguments are among the possible configure command arguments supported. Please refer to <a class="el" href="page_a71ch_configure_tool.html">A71CH Configure Tool</a> for more information on the configure tool. </p><pre class="fragment">$ ./a71chConfig_socket_native.exe 192.168.1.64:8050 info device
a71chConfig (Rev 0.92) .. connect to A71CH. Chunksize at link layer = 256.
Connection to secure element over socket to 192.168.1.64:8050
ATR=0x3B.FB.18.00.00.81.31.FE.45.50.4C.41.43.45.48.4F.4C.44.45.52.AB.
HostLib Version            : 0x0103
Applet-Rev:SecureBox-Rev   : 0x0107:0x0000
A71CH in Debug Mode Version (SCP03 is not set up)
selectResponse:   0x0107
transportLockState: 0x02 (Open device, Transport Lock can no longer be set)
injectLockState:    0x02 (Unlocked)
gpStorageSize:      1024
uid (LEN=18):
47:90:70:02:47:91:12:10:20:89:00:50:36:91:64:23:00:00
</pre><h1><a class="anchor" id="build_info_make_args"></a>
Makefile arguments</h1>
<p>The makefile takes a target as first argument and three variable assignments as subsequent arguments. The target can be one of</p><ul>
<li>default (wraps up all A71CH Host SW file in one executable)</li>
<li>engine (creates an OpenSSL engine in a shared library)</li>
<li>lib (creates a shared library - <b> deprecated use cmake instead </b>)</li>
<li>dl (creates an executable linking to the shared library <b> deprecated use cmake instead </b>)</li>
</ul>
<p>The variable <code>app</code> determines the executable or library that will be built; it can be set to</p><ul>
<li>A71CH (Example application with A71CH Host Library files statically linked)</li>
<li>A71CH_CONFIG (Config Tool application with A71CH Host Library files statically linked)</li>
<li>A71CH_LIGHT (Example application with limited scope - not using OpenSSL - with A71CH Host Library files statically linked)</li>
<li>A71CH_HLSE (Example application with A71CH Host Library files and HLSE statically linked)</li>
<li>A71CH_LIB (Shared library containing A71CH Host Library functionality - <b> deprecated use cmake instead </b>)</li>
<li>A71CH_DL_EXE (Example application linking dynamically to A71CH Host Library - <b> deprecated use cmake instead </b>)</li>
<li>A71CH_CONFIG_DL_EXE (Config Tool application linking dynamically to A71CH Host Library - <b> deprecated use cmake instead </b>)</li>
<li>RJCT_A71 (RJCT server with relevant A71CH Host Library files statically linked)</li>
</ul>
<p>The variable <code>conn</code> determines the communication layer that will be used; it can be set to</p><ul>
<li>i2c</li>
<li>socket</li>
</ul>
<p>The variable <code>platf</code> determines the host platform that is targetted; it can be set to</p><ul>
<li>imx (for NXP's iMX6UL platform)</li>
<li>native (in principle a platform with a self hosted gcc compiler)</li>
</ul>
<h1><a class="anchor" id="build_info_utility"></a>
Build utility buildA71CH.sh</h1>
<p><code>buildA71CH.sh</code> is a convenience bash shell script that tries to determine the platform/environment it is running on and it can be used to fire off compilation of the different targets applicable to the detected context. Invoking the shell script with the options <code>all</code> <code>dry</code> will show the different makefile invocations without actually executing them. You can copy/paste one of these proposed command lines to build an individual target. </p><pre class="fragment">user@user-VirtualBox:~/ubuntu_exchange/axHostSw/linux$ ./buildA71CH.sh all dry
Script to automatically build/evaluate build success of specific A71CH solution binaries
Compiling all binaries
GNU/Linux
   Cross compiling for imx **
&gt;&gt; make -f Makefile_A71CH default app=A71CH conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH default app=A71CH_CONFIG conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH default app=A71CH_LIGHT conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH default app=A71CH_HLSE conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH engine app=A71CH_LINKED_ENGINE conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH default app=RJCT_A71 conn=i2c platf=imx
Build evaluation (dry run) succeeded
</pre><h1><a class="anchor" id="build_info_general_all_possible_targets"></a>
Overview of all possible targets</h1>
<h2><a class="anchor" id="build_info_general_all_possible_targets_iMX"></a>
iMX cross-compilation</h2>
<p>When cross-compiling for iMX (ensure you have correctly initialized the environment for cross-compilation first, refer to <a class="el" href="page_imx6ul.html">Setup i.MX6ULEVK</a> for more information) the following invocations create binaries with (sc)i2c connectivity support 'conn=i2c'.</p>
<p>Creating executables with the A71CH Host Library files statically linked: </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH default app=A71CH conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH default app=A71CH_CONFIG conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH default app=A71CH_LIGHT conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH default app=A71CH_HLSE conn=i2c platf=imx
</pre><p>Creating an OpenSSL engine encapsulating part of the A71CH's crypto functionality: </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH engine app=A71CH_LINKED_ENGINE conn=i2c platf=imx
</pre><p>Creating RJCT server executables with the necessary A71CH Host library statically linked: </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH default app=RJCT_A71 conn=i2c platf=imx
</pre><p>It is also possible to cross compile with 'conn=socket', using the resulting application requires a network reachable RJCT server. </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH default app=A71CH conn=socket platf=imx
</pre><dl class="section note"><dt>Note</dt><dd>The following use of Makefile_A71CH <b> to create shared libraries or executables that link to it is deprecated. </b> Refer to <a class="el" href="posix_build.html#build_info_general_cmake">cmake</a> for details on the new approach, which also provides installation support.</dd></dl>
<p>Creating the A71CH shared Host library with I2C support. </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH lib app=A71CH_LIB conn=i2c platf=imx
</pre><p>Creating executables that link dynamically to the (above) A71CH shared Host library: </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH dl app=A71CH_DL_EXE conn=i2c platf=imx
&gt;&gt; make -f Makefile_A71CH dl app=A71CH_CONFIG_DL_EXE conn=i2c platf=imx
</pre><p>Creating an OpenSSL engine encapsulating part of the A71CH's crypto functionality: </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH engine app=A71CH_DL_ENGINE conn=i2c platf=imx
</pre><h2><a class="anchor" id="build_info_general_all_possible_targets_cygwin"></a>
Cygwin</h2>
<p>When compiling on Cygwin the following invocations create a binary. All resulting applications are statically linked to the A71CH Host Library files and require a network reachable RJCT server. </p><pre class="fragment">&gt;&gt; make -f Makefile_A71CH default app=A71CH conn=socket platf=native
&gt;&gt; make -f Makefile_A71CH default app=A71CH_CONFIG conn=socket platf=native
&gt;&gt; make -f Makefile_A71CH default app=A71CH_LIGHT conn=socket platf=native
&gt;&gt; make -f Makefile_A71CH default app=A71CH_HLSE conn=socket platf=native
</pre><dl class="section note"><dt>Note</dt><dd>The following use of Makefile_A71CH <b> to create shared libraries or executables that link to it is deprecated. </b> Refer to <a class="el" href="posix_build.html#build_info_general_cmake">cmake</a> for details on the new approach, which also provides installation support.</dd></dl>
<p>It's also possible to create a shared library and have an application link to this library. Special care has to be taken to have a cygwin symbolic link (libA71CH_socket_native.dll) point to the actual shared library (libA71CH_socket_native.so). </p><pre class="fragment">Inside directory A71CH/lib: ln -s libA71CH_socket_native.so libA71CH_socket_native.dll

&gt;&gt; make -f Makefile_A71CH lib app=A71CH_LIB conn=socket platf=native
&gt;&gt; make -f Makefile_A71CH dl app=A71CH_DL_EXE conn=socket platf=native</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="page_build.html">Build Environments</a></li>
    <li class="footer">Generated on Fri Sep 7 2018 19:24:07 for A71CH Host Sw by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
