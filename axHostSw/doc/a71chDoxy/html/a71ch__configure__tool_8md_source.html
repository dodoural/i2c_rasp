<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A71CH Host Sw: a71ch_dox/a71ch_configure_tool.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A71CH Host Sw
   &#160;<span id="projectnumber">v01.05.00</span>
   </div>
   <div id="projectbrief">NXP Semiconductors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a71ch__configure__tool_8md.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">a71ch_dox/a71ch_configure_tool.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# A71CH Configure Tool {#page_a71ch_configure_tool}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;- DocRevision : 0.94</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;- Date        : 2018-03-22</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;# (1) Introduction {#sec_a71chcfgtool_introduction}</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;The A71CH Configure Tool is a command line tool that supports the insertion of credentials</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;into the A71CH.</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;The tool is provided in source code and can be deployed in one of the following configurations:</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;- Installed on a development PC communicating over TCP/IP with the embedded target</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;- Standalone on an embedded target</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;In [Tool deployment](#sec_a71chcfgtool_tool_deployment) we go into more detail on this.</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;@copydetails a7xConfigCliHelp</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;The tool provides an overview of the available command line options. We&#39;ll go into more detail</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;on the syntax in section [command reference](#sec_a71chcfgtool_cmd_ref).</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;The easiest way to get familiar with the A71CH configure tool is to open it in interactive mode.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;Be sure to connect to an A71CH with the Debug Mode still available so you can easily revert to the</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;initial state of the component. The following captures a session with a brand new A71CH with the</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;Debug Mode active:</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    root@imx6ulevk:~/axHostSw/linux# ./a71chConfig_i2c_imx interactive</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    a71chConfig (Rev 1.00) .. connect to A71CH. Chunksize at link layer = 256.</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    I2CInit: opening /dev/i2c-1</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    I2C driver: PEC flag cleared</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    I2C driver supports plain i2c-level commands.</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    I2C driver supports Read Block.</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    SCI2C_ATR=0xB8.03.11.01.05.B9.02.01.01.BA.01.01.BB.0C.41.37.30.30.35.43.47.32.34.32.52.31.BC.00.</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    HostLib Version            : 0x0130</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    Applet-Rev:SecureBox-Rev   : 0x0131:0x0000</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    &gt;&gt;&gt; info device</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    A71CH in Debug Mode Version (SCP03 is not set up)</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    selectResponse:   0x0131</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    transportLockState: 0x03 (Transport Lock NOT YET set)</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    injectLockState:    0x02 (Unlocked)</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    gpStorageSize:      4096</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    uid (LEN=18):</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    47:90:51:68:47:91:12:10:23:41:00:53:66:96:47:51:48:12</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    &gt;&gt;&gt; info pair</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    Public Keys from ECC key pairs:</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        idx=0x00 n.a.</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        idx=0x01 n.a.</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        idx=0x02 n.a.</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        idx=0x03 n.a.</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    &gt;&gt;&gt; gen pair -x 0</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    &gt;&gt;&gt; info pair</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    Public Keys from ECC key pairs:</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        idx=0x00 ECC_PUB (LEN=65):</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    04:0A:81:86:1D:0C:E6:F6:E4:57:65:8B:51:92:E9:D1:CB:AF:96:12:C6:71:FB:79:F1:3D:C9:64:4D:56:CC:87:</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    2E:8C:32:9B:0A:F8:BB:4B:79:56:7D:F0:9D:C2:D2:B8:96:E0:04:B7:D9:50:F5:EC:C2:50:99:25:6B:5B:4B:E1:</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    3B</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        idx=0x01 n.a.</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        idx=0x02 n.a.</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        idx=0x03 n.a.</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    &gt;&gt;&gt; quit</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    root@imx6ulevk:~/axHostSw/linux#</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;# (2) Usage modes  {#sec_a71chcfgtool_usagemdoes}</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;The A71CH Configure Tool can be used in:</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;- Interactive mode. The tool opens a communication session with the A71CH, the user can issue</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;configure commands in this session. The syntax to be used is identical to the syntax used in the</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;command line mode.</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;- Command line mode: passing parameters as command line arguments. Each invocation of the tool</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;establishes a new communication session between Host and A71CH.</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;- Batch file mode: this is a special variant of the command line mode where multiple configure</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;commands are bundled in a file that is passed as a command line argument. All commands contained in</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;the file are handled in the same communication session between Host and A71CH.</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;\note On POSIX platforms like LINUX or Cygwin the interactive mode supports simple command line completion and command history</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;(navigateable with the up and down arrows).</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;It also stores a list of executed commands in a file called &#39;a71chConfigCmdHistory.txt&#39;.</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;# (3) Tool deployment {#sec_a71chcfgtool_tool_deployment}</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;## HW Setup for iMX {#sec_a71chcfgtool_hw_setup_imx}</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;The HW setup, when using the Configure tool is illustrated the following figure.</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;In case (1) the A71CH has not been integrated into an end-device yet.</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;In case (2) the A71CH is already integrated into the end-device (e.g. an IoT Appliance)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;![HW Set-up](A71CH_PersoDevHw_iMX.svg)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;## HW Setup for Kinetis {#sec_a71chcfgtool_hw_setup_kinetis}</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;For running the configure tool with a Kinetis system, USB-VCOM Interface to</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;PC is used.  In this combination \ref page_VCOM Application needs to be running</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;on kinetis.  For more information, see @ref sec_a71chcfgtool_swlayer_kinetis</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;## SW layers and communication for iMX {#sec_a71chcfgtool_swlayer_imx}</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;In case the Configure Tool is installed on a development PC, the iMX6UL must run an RJCT-server process that will</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;deal with the unpacking of the incoming commands and the communication over SCI2C with the A71CH.</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;![Configure Tool installed on PC](A71CH_PersoDevSW_PC_iMX.svg)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;\note Refer to \ref page_rjct_server for more information on the RJCT server.</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;In case the Configure Tool is installed on the embedded target, a development PC will typically</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;be used to run a console that provides access via SSH to the embedded target.</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;![Standalone Configure Tool on Embedded Target](A71CH_PersoDevSW_iMXOnly.svg)</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;## SW layers and communication for Kinetis {#sec_a71chcfgtool_swlayer_kinetis}</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;For Kinetis based embedded systems, the configuration tool can only be run from the PC.</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;Also, the configuration tool is only compiled with OpenSSL (not with mbedTLS).</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;\ref page_VCOM needs to be running on the Kinetis platform and the</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;communcation between HostPC and Kinetis happens over USB VCOM.</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;The Kinetis platform will that care of SCI2C protocol communication with the A71CH.</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;![Configure Tool installed on PC for Kinetis](A71CH_Kinetis_OpenSSLConfig.jpg)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;\note Refer to \ref page_rjct_server for more information on the RJCT server.</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;# (4) Command reference {#sec_a71chcfgtool_cmd_ref}</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;## Overall introduction {#sec_a71chcfgtool_overall_intro}</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;A command has the following general structure: a mandatory command name \p &lt;cmd-n&gt; is followed by</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;an optional command qualifier \p &lt;cmd-q&gt;, followed by &#39;0 to n&#39; (option, value) pairs.</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    &lt;cmd-n&gt; [&lt;cmd-q&gt;] [-option &lt;option-value&gt;]*</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;The command names \p &lt;cmd-n&gt; are further listed and explained in detail in the remainder of this section.</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    &lt;cmd-n&gt; = {apdu, debug, erase, gen, info, ...}</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;Legal values for command qualifiers \p &lt;cmd-q&gt; depend on the actual command name \p &lt;cmd-n&gt;.</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    &lt;cmd-q&gt; = {cnt, gp, pair, pub, sym, ...}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        cfg = configure key</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        cnt = monotonic counter</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        gp = general purpose data</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        pair = ECC key pair</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        pub = ECC public key</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        sym = Symmetric secret</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    &lt;cmd-q&gt; = {permanently_disable_debug, reset, all, ...}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;Legal (option, value) pairs    again depend on the preceding \p &lt;cmd-n&gt; or \p &#39;&lt;cmd-n&gt; \p &lt;cmd-q&gt;&#39;.</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;The order of the (option, value) pairs after the \p &lt;cmd-n&gt; or \p &#39;&lt;cmd-n&gt; \p &lt;cmd-q&gt;&#39; needs to be strictly respected.</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;The type of the value, can be any of the following</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    &lt;hexvalue&gt; = [0-9A-F][0-9A-F]([0-9A-F][0-9A-F])*</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        examples of legal hexvalue&#39;s are</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            0A0B0C0D</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            00112233445566778899AABBCCDDEEFF</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        the following hexvalue&#39;s are not allowed</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            0x0A0B0C0D # leading &#39;0x&#39; decorator is not supported</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            0A1        # odd number of ascii characters is not supported</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    &lt;int&gt; = integer (currently only positive integers are supported)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    &lt;filename&gt; = further explained with the individual commands</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;## apdu  {#sec_a71chcfgtool_cmd_apdu}</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    apdu -cmd &lt;hexvalue&gt; -sw &lt;hexvalue&gt;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;The \p apdu command allows to exchange an APDU (in &#39;raw&#39; format) between the Host and the A71CH.</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;It&#39;s mandatory to specify the expected status word that will be returned by the A71CH, if</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;the actual returned status word is different this will be flagged as an execution error.</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;\note This low level command can be used to extend the functionality of the Config Tool.</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;In order to use this command one needs to consult the A71CH APDU specification. This command</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;is not required for normal provisioning use cases.</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;In the following example the host requests the A71CH the SHA256 value of &quot;F0F1F2F3&quot;.</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;The APDU command and response are printed on the console. The last two byte contained</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;in the response</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    &gt;&gt;&gt; apdu -cmd 8096000004F0F1F2F300 -sw 9000</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    cmd (LEN=10):</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    8096000004F0F1F2F300</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    rsp (LEN=34):</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    FEA4CE6719F1FDB6D2E30CFB86C2E797DBD4A3247FF2B0EFC15A814C5B25C75E9000</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;## connect  {#sec_a71chcfgtool_cmd_connect}</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    connect [close|open]</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;The \p connect command allows to close or re-open the connection with an attached secure element.</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;This command can be used in an interactive workflow where several instance of an A71CH are</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;being configured. Before detaching a configured A71CH one calls \p connect \p close; after attaching</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;another A71CH one calls \p connect \p open.</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;In the following example a connection is opened.</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    &gt;&gt;&gt; connect open</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    I2CInit: opening /dev/i2c-1</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    I2C driver: PEC flag cleared</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    I2C driver supports plain i2c-level commands.</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    I2C driver supports Read Block.</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;## debug  {#sec_a71chcfgtool_cmd_debug}</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    debug [permanently_disable_debug|reset]</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;The \p debug command can be used to permanently switch of the Debug Mode of the A71CH (the Debug Mode of</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;the A71CH is a convience mode that can be used during product development). It can also be used - assuming</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;the Debug Mode is still on - to bring the A71CH back to its initial state.</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;\note Issuing a debug reset also erases all stored credentials.</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;In the following example a debug reset is issued.</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    &gt;&gt;&gt; debug reset</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;## ecrt  {#sec_a71chcfgtool_cmd_ecrt}</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;The \p ecrt \p command erases a certificate from the GP storage area by index.</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    ecrt -x &lt;int&gt;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;\note The valid index range for certificates is is limited only by memory size.</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;In the following \p ecrt \p example the certificate at index 3 is erased from the A71CH.</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    &gt;&gt;&gt; ecrt -x 3</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;## erase  {#sec_a71chcfgtool_cmd_erase}</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;The \p erase command erases (deletes the value) of the specified stored credential. A locked credential</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;can not be erased. Erasing a monotonic counter value is only possible when the Debug Mode of the A71CH</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;is available.</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    erase [cnt|pair|pub|sym] -x &lt;int&gt;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;In the following example the ECC key pair stored on index 0 is erased.</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    erase pair -x 0</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;## gen {#sec_a71chcfgtool_cmd_gen}</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;The \p gen command makes the A71CH create a valid ECC key pair on the indicated index.</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    gen pair -x &lt;int&gt;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;In the following example a new ECC keypair is created and stored on index 1</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    gen pair -x 1</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;## get  {#sec_a71chcfgtool_cmd_get}</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;The \p get command retrieves the public key value from either a public key or key pair at the index</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;passed as argument and stores it - in pem format - in a file provided as argument.</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;\note The parameter passed after the c option represents the key type and can be either 0x10 for public pair or 0x20 for public key.</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    get pub -c &lt;hex_value&gt; -x &lt;int&gt; -k &lt;keyfile.pem&gt;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;In the following example the ECC public key stored at index 0 is stored to PEM file keyfile.pem</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    get pub -c 20 -x 0 -k keyfile.pem</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;## info {#sec_a71chcfgtool_cmd_info}</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;The \p info command can be used to echo the value and/or status of the A71CH or its stored</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;credentials to the console. Issuing an &#39;info all&#39; will echo the same information as</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;issuing &#39;info device&#39;, &#39;info cnt&#39;, &#39;info pair&#39;, &#39;info pub&#39;, &#39;info gp -h 0000 -n &amp;lt;all&amp;gt;&#39; in sequence.</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;The value of secret credentials like the private part of a keypair, a symmetric key or a</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;configuration key can not be retrieved from the A71CH.</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;The &#39;info status&#39; command will report on the Initialized/Empty and Locked/Open status of all</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;credentials.</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;It&#39;s possible to echo the value of consecutive 32 byte data segments from general purpose data storage</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;by specifying the hexadecimal offset (specified with 4 hexadecimal digits) into the data store</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;and the amount of segments to display.</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    info [all|device|cnt|pair|pub|sym|status]</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    info gp -h &lt;hexvalue_offset&gt; -n &lt;segments&gt;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;In the following example the credential status is requested. The output corresponds to the status</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;of a new device.</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    &gt;&gt;&gt; info status</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    SCP03 is Not enabled</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    Key Pair status:</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            Index=0: Empty Open</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            Index=1: Empty Open</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            Index=2: Empty Open</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            Index=3: Empty Open</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    Public Key status:</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            Index=0: Empty Open</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            Index=1: Empty Open</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            Index=2: Empty Open</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    Config Key status:</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            Index=0: Empty Open</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            Index=1: Empty Open</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            Index=2: Empty Open</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    Sym Secret status:</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            Index=0: Empty Open</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            Index=1: Empty Open</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            Index=2: Empty Open</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            Index=3: Empty Open</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    Counter status:</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            Index=0: Initialized Open</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            Index=1: Initialized Open</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    Certificate Objects:</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            0 Absolute offset = 0x00 Actual Size = 0x313</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            1 Absolute offset = 0x320 Actual Size = 0x313</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    Data Objects:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        0 Absolute offset = 0x640 Actual Size = 0x09</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        1 Absolute offset = 0x660 Actual Size = 0x09</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    General Purpose Storage status:</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            Offset=0x0000: Open     Offset=0x0020: Open     Offset=0x0040: Open     Offset=0x0060: Open</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            Offset=0x0080: Open     Offset=0x00A0: Open     Offset=0x00C0: Open     Offset=0x00E0: Open</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            Offset=0x0100: Open     Offset=0x0120: Open     Offset=0x0140: Open     Offset=0x0160: Open</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            Offset=0x0180: Open     Offset=0x01A0: Open     Offset=0x01C0: Open     Offset=0x01E0: Open</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            Offset=0x0200: Open     Offset=0x0220: Open     Offset=0x0240: Open     Offset=0x0260: Open</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            Offset=0x0280: Open     Offset=0x02A0: Open     Offset=0x02C0: Open     Offset=0x02E0: Open</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            Offset=0x0300: Open     Offset=0x0320: Open     Offset=0x0340: Open     Offset=0x0360: Open</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            Offset=0x0380: Open     Offset=0x03A0: Open     Offset=0x03C0: Open     Offset=0x03E0: Open</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;In the following example the contents from two 32 byte data segments is requested starting</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;from general purpose storage offset 0x0010:</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    &gt;&gt;&gt; info gp -h 0010 -n 2</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    GP Storage Data (2 segments from offset 0x0010):</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            0x0010 (LEN=32): 0000000000000000000000000000000000000000000000000000000000000000</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            0x0030 (LEN=32): 0000000000000000000000000000000000000000000000000000000000000000</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;## interactive {#sec_a71chcfgtool_cmd_interactive}</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;Used to start the interactive mode from the command line</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;## lock {#sec_a71chcfgtool_cmd_lock}</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;The \p lock commands allows to lock individual credentials (ECC public keys and ECC key pairs).</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;It allows to lock data segments of 32 byte in general purpose storage (on offsets that are</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;multiples of 0x0020). It&#39;s also possible to forbid the injection of unwrapped ECC public keys, ECC key pairs</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;and symmetric secrets at the device level.</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    lock [pair|pub] -x &lt;int&gt;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    lock gp -h &lt;hexvalue_offset&gt; -n &lt;segments&gt;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    lock inject_plain</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;The following example locks the ECC key pair at index 0</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    &gt;&gt;&gt; lock pair -x 0</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;The following example locks 2 data segments of 32 byte in general purpose data storage</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;starting from offset 0x0060</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    &gt;&gt;&gt; lock gp -h 0060 -n 2</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;## obj erase  {#sec_a71chcfgtool_cmd_obj_erase}</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;The \p obj \p erase command erases the object at the provided index.</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    obj erase -x &lt;int&gt;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;\note Upon erasing an object it cannot be reconstructed.</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;In the following \p obj \p erase example the object at index 0 is erased.</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    &gt;&gt;&gt; obj erase -x 0</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;## obj get  {#sec_a71chcfgtool_cmd_obj_get}</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;The \p obj \p get command gets the value of a data object, it retrieves the data from a specific offset within the data object</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;(fetching the specified amount of byte). Optionally, the data is written to file. The type file could be 16 or 32 bytes at a line.</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;If no type is specified the default would be 32 bytes.</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    obj get -x &lt;int&gt; [-h &lt;hexvalue_offset&gt;] [-s &lt;hexvalue_size&gt;] [-f &lt;data.txt&gt; -t [hex_16|hex_32]]</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;\note The offset is relative to the start location of the object and must be specified as a 4 digit hexadecimal value.</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;In the following \p obj \p get example the value of the object at index 0 is read out.</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    &gt;&gt;&gt; obj get -x 0 -h 0000 -s 0009</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    &gt;&gt;&gt; 112233445566778899</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;## obj update   {#sec_a71chcfgtool_cmd_obj_update}</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;The \p obj \p update command updates the value of a data object. It updates the data relative to an internal offset passed as a parameter. The data can be passed on the command line or be contained in a file.</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    obj update -x &lt;int&gt; -h &lt;hexvalue_offset&gt; [-f &lt;data.txt&gt; -t [hex_16|hex_32] | -h &lt;hexvalue_data&gt;]</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;\note The data in the file must be binary and not textual. An object must already exist at the specified index. If data is read from file it can be set with lines in length of</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;16 or 32 bytes (i.e. hex_16 or hex_32). The default value is lines of 32 bytes.</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;In the following \p obj \p update example the value of the object at index 0 is updated.</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    &gt;&gt;&gt; obj update -x 0 -h 0000 -h 998877665544332211</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;## obj write  {#sec_a71chcfgtool_cmd_obj_write}</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;The \p obj \p write command creates an object. The value of the object to be created can be passed on the command line or contained in a file.</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;When using the \p -n option the requested segments will be reserved for the data object and filled with zeros. If data is read from file it can be set with lines in length of</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;16 or 32 bytes (i.e. hex_16 or hex_32). The default value is lines of 32 bytes.</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    obj write -x &lt;int&gt; [-f &lt;data.txt&gt; -t [hex_16|hex_32] | -h &lt;hexvalue_data&gt; | -n &lt;segments&gt;]</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;In the following \p obj \p write example an zero filled object is created at index 0 with a size of 5 segments.</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    &gt;&gt;&gt; obj write -x 0 -n 5</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;## rcrt {#sec_a71chcfgtool_cmd_rcrt}</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;The \p rcrt \p command reads a certificate from the GP storage area by index. Optionally, the command can save the certificate read to a CRT file.</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    rcrt -x &lt;int&gt; [-c &lt;certfile.crt&gt;]</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;\note The certificate data will be presented whether it was written to a file or not. The valid index range for certificates is is limited only by memory size.</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;In the following \p rcrt \p example the certificate at index 3 is read from the A71CH, upon success it is also written to a CRT file.</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    &gt;&gt;&gt; rcrt -x 3 -c certificate.crt</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    CER_DATA (LEN=520):</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    30820204308201A9020900CFD5820FFEC40937300A06082A8648CE3D04030230</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    8189310B30090603550406130242453116301406035504080C0D566C61616D73</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    42726162616E74310F300D06035504070C064C657576656E3111300F06035504</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    0A0C084E58502D44656D6F31163014060355040B0C0D4E58502D44656D6F2D55</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    6E6974310D300B06035504030C0464656D6F3117301506092A864886F70D0109</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    01160864656D6F406E7870301E170D3135313230373130353132395A170D3136</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    313230363130353132395A308188310B30090603550406130242453116301406</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    035504080C0D566C61616D7342726162616E74310F300D06035504070C064C65</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    7576656E310E300C060355040A0C05697063616D31123010060355040B0C0969</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    7063616D556E69743112301006035504030C09697063616D44656D6F31183016</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    06092A864886F70D0109011609697063616D406E78703059301306072A8648CE</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    3D020106082A8648CE3D03010703420004DB4CDB6C5A96C1615895095222AA0E</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    A3BC6F9E714D6438F0B120D691F18D7E7410EE04BE71D33A2D8B2D3B66F7174A</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    9654536965AFD2ABADB55269C6A6C0085E300A06082A8648CE3D040302034900</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    304602210083AA91AE33396825D560390952AEE91C64814C7CA681BA50589558</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    D681F974270221009BA1CF31A823B96C391E3C4F839666AECE9949639D796B24</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    A5B987A92E6F1CFA</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;## refpem {#sec_a71chcfgtool_cmd_refpm}</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;The \p refpem command allows to create A71CH OpenSSL Engine specific reference pem files.</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;It can be used in a mode that fetches the public key value from the attached A71CH:</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    refpem -c &lt;hex_value&gt; -x &lt;int&gt; -r &lt;ref_keyfile.pem&gt;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;Or it can be used in a &#39;not-connected&#39; mode that fetches the public key value from a pem file</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;(containing an EC key pair) supplied as an argument.</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    refpem -c &lt;hex_value&gt; -x &lt;int&gt; -k &lt;keyfile.pem&gt; -r &lt;ref_keyfile.pem&gt;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;The value following the \p -c switch must be either 10 (create a reference to a key pair) or 20</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;(create a reference to a public key).</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;The value following the \p -x switch is the storage index of either key pair or public key.</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;The following command creates a reference pem file &#39;my_ref_keyfile.pem&#39; referring to a keypair</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;stored at index 1.</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    refpem -c 10 -x 1 -r my_ref_keyfile.pem</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;## script {#sec_a71chcfgtool_cmd_script}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;The \p script command can be used to issue the Configure tool commands contained in a file.</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    script -f &lt;script.txt&gt;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;An example of script file (script_example.txt)</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    root@imx6ulevk:~# cat script_example.txt</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    # Simple example script</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    info pair</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    gen pair -x 0</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    info pair       # This will illustrate a key pair was created</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;The following example issues the commands contained in the script file above (script_example.txt)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    &gt;&gt;&gt; script -f script_example.txt</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    &gt;&gt; # Simple example script</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    &gt;&gt; info pair</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    Public Keys from ECC key pairs:</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            idx=0x00 n.a.</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            idx=0x01 n.a.</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    &gt;&gt; gen pair -x 0</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    &gt;&gt; info pair       # This will illustrate a key pair was created</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    Public Keys from ECC key pairs:</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            idx=0x00 ECC_PUB (LEN=65):</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    04:A4:B3:3B:A3:D4:23:BD:19:C3:CB:20:DB:6F:D3:80:46:73:06:56:2F:83:B2:B1:AE:86:9A:EF:E9:7A:62:A3:</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    04:E7:C1:42:31:97:D5:19:5A:80:27:74:DC:20:EC:B7:93:9B:E5:C1:22:22:6B:E3:49:A4:FB:3A:5C:26:08:85:</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    B5</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            idx=0x01 n.a.</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;## scp {#sec_a71chcfgtool_cmd_scp}</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;The \p scp command can be used to write a set of SCP03 keys to the A71CH (&#39;scp put ...&#39;) or to establish</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;an active SCP03 channel between Host and A71CH (&#39;scp auth ...&#39;). The &#39;scp clear_host&#39; command will force</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;the Host to issue commands in the clear again.</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    scp [put|auth] -h &lt;hexvalue_keyversion&gt; -k &lt;keyfile&gt;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    scp clear_host</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;An example of a keyfile containing a set of SCP03 keys:</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    root@imx6ulevk:~# cat scp_keyfile_example.txt</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    # This is a comment, empty lines and comment lines allowed.</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    ENC AA112233445566778899AABBCCDDEEFF # Trailing comment</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    MAC BB112233445566778899AABBCCDDEEFF # Optional trailing comment</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    DEK CC112233445566778899AABBCCDDEEFF # Optional trailing comment</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;## set {#sec_a71chcfgtool_cmd_set}</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;The \p set command can be used to set a credential stored on the A71CH to a specific value.</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;\note The \p set \p gp command can only be used to set a maximum of 32 byte of data at a time.</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;\note The value of a key pair or public key can either be passed as command line parameters or be</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;contained in a pem-file (containing an EC key pair).</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;\note The command line value of the private key (set by the \p set \p pair command) can be either in the</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;clear or wrapped with the Configuration key stored at index 1. Wrapping is according to</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;[RFC3394](https://tools.ietf.org/html/rfc3394).</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;\note The command line value of the public key (set by the \p set \p pub command) can be either in the</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;clear or wrapped with the Configuration key stored at index 2. In case [RFC3394](https://tools.ietf.org/html/rfc3394)</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;wrapping is applied the first byte of the public key (the one indicating the public key format)</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;is removed before applying wrapping.</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;\note The value of the configure key, the monotonic counter or the symmetric secret</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;can only be passed explicitly as a command line parameter. The configure and symmetric keys can</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;also be set wrapped (with the stored value of the key) according to [RFC3394](https://tools.ietf.org/html/rfc3394).</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;\note Whether an argument is wrapped is implicit in the lenght of the provided argument.</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    set gp -h &lt;hexvalue_offset&gt; -h &lt;hexvalue_data&gt;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    set pair -x &lt;int&gt; [-k &lt;keyfile.pem&gt; | -h &lt;hexvalue_pub&gt; -h &lt;hexvalue_priv&gt;]</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    set pub  -x &lt;int&gt; [-k &lt;keyfile.pem&gt; | -h &lt;hexvalue&gt;]</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    set [cfg|cnt|sym]  -x &lt;int&gt; -h &lt;hexvalue&gt;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;The following example writes 5 byte of data at offset 0004 into the General Purpose data store.</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;The data written (4137314348) is the equivalent of the ASCII encoding of the string &#39;A71CH&#39;. The command</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;itself is preceded and followed by an info statement covering the general purpose storage segment of</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;interest.</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    &gt;&gt;&gt; info gp -h 0000 -n 1</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    GP Storage Data (1 segments from offset 0x0000):</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            0x0000 (LEN=32): 0000000000000000000000000000000000000000000000000000000000000000</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    &gt;&gt;&gt; set gp -h 0004 -h 4137314348</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    &gt;&gt;&gt; info gp -h 0000 -n 1</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    GP Storage Data (1 segments from offset 0x0000):</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            0x0000 (LEN=32): 0000000041373143480000000000000000000000000000000000000000000000</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;The following example set the key pair at index 1 from the value contained in file keyfile_ecc_nist_256_1.pem.</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;The command itself is preceded and followed by an info statement on the stored key pairs.</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    &gt;&gt;&gt; info pair</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    Public Keys from ECC key pairs:</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            idx=0x00 n.a.</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            idx=0x01 n.a.</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    &gt;&gt;&gt; set pair -x 1 -k keyfile_ecc_nist_256_1.pem</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    ECCPrivateKey (LEN=32):</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    21:AF:C1:1E:F5:64:61:3D:2E:96:4D:8B:93:19:CC:AB:38:E0:7A:6E:35:3A:21:A3:D1:69:8B:19:13:DF:1D:FF</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    ECCPublicKey (LEN=65):</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    04:74:E2:1E:54:6C:C1:9E:31:58:55:B6:D5:45:D3:0D:3F:48:79:D4:64:5D:3F:67:73:75:FB:0B:2C:80:43:1E:</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    8D:34:95:71:0E:71:E1:E3:F8:93:62:75:B4:AC:F1:52:E3:DE:55:CC:1D:86:5E:B0:D1:22:A8:CF:35:EC:47:31:</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    F8</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    &gt;&gt;&gt; info pair</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    Public Keys from ECC key pairs:</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            idx=0x00 n.a.</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            idx=0x01 ECC_PUB (LEN=65):</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    04:74:E2:1E:54:6C:C1:9E:31:58:55:B6:D5:45:D3:0D:3F:48:79:D4:64:5D:3F:67:73:75:FB:0B:2C:80:43:1E:</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    8D:34:95:71:0E:71:E1:E3:F8:93:62:75:B4:AC:F1:52:E3:DE:55:CC:1D:86:5E:B0:D1:22:A8:CF:35:EC:47:31:</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    F8</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;&gt; The value contained in file keyfile_ecc_nist_256_1.pem is</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    $ cat keyfile_ecc_nist_256_1.pem</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    -----BEGIN EC PRIVATE KEY-----</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    MHcCAQEEICGvwR71ZGE9LpZNi5MZzKs44HpuNToho9FpixkT3x3/oAoGCCqGSM49</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    AwEHoUQDQgAEdOIeVGzBnjFYVbbVRdMNP0h51GRdP2dzdfsLLIBDHo00lXEOceHj</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    +JNidbSs8VLj3lXMHYZesNEiqM817Ecx+A==</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    -----END EC PRIVATE KEY-----</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;The following example sets the public key at index 0 to the provided public key value</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;(in the clear, ANSI X9.62 uncompressed format). The command itself is preceded and followed by an</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;info statement on the stored public key.</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    &gt;&gt;&gt; info pub</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    Public Keys:</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            idx=0x00 n.a.</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            idx=0x01 n.a.</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    &gt;&gt;&gt; set pub -x 0 -h 043802B1164C30860AC913F5F997B84158C40CFFCC1D3A4359BC22574A4FC95E628933A9E95820AD6B96A1DA106BDD5D6A8E556A78AE959C59336FE53E3A1D9ED4</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    &gt;&gt;&gt; info pub</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    Public Keys:</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            idx=0x00 ECC_PUB (LEN=65):</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    04:38:02:B1:16:4C:30:86:0A:C9:13:F5:F9:97:B8:41:58:C4:0C:FF:CC:1D:3A:43:59:BC:22:57:4A:4F:C9:5E:</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    62:89:33:A9:E9:58:20:AD:6B:96:A1:DA:10:6B:DD:5D:6A:8E:55:6A:78:AE:95:9C:59:33:6F:E5:3E:3A:1D:9E:</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    D4</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            idx=0x01 n.a.</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;The following example sets the monotonic counter at index 0 to 00E0. The command itself is preceded and followed by an</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;info statement on the stored monotonic counters.</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    &gt;&gt;&gt; info cnt</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    Monotonic counter values:</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            idx=0x00 0x00000000</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            idx=0x01 0x00000000</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    &gt;&gt;&gt; set cnt -x 0 -h 000000E0</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    &gt;&gt;&gt; info cnt</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    Monotonic counter values:</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            idx=0x00 0x000000E0</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            idx=0x01 0x00000000</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;## transport {#sec_a71chcfgtool_cmd_transport}</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;The \p transport \p lock command can be used to enable the transport lock on the A71CH. To disable the</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;transport lock one needs to pass the transport key as an option value to the \p transport</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;\p unlock command.</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;\note A precondition to enable the transport lock is that the Transport Configuration key has been</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;set: use &#39;set cfg -x 0 -h &amp;lt;hexvalue_tpkey&amp;gt;&#39; to achieve this. Furthermore the transport lock / unlock</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;cycle can only be initiated once.</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    transport [lock|unlock -h &lt;hexvalue_tpkey&gt;]</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;The following example sets the Transport Configuration key, locks the device and finally unlocks the</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;device. The \p info \p device command is used to illustrate the value of the transportLockState of</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;the device.</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    &gt;&gt;&gt; info device</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    ...</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    transportLockState: 0x03 (Transport Lock NOT YET set)</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    ...</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    &gt;&gt;&gt; set cfg -x 0 -h AA112233445566778899AABBCCDDEEFF</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    &gt;&gt;&gt; transport lock</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    &gt;&gt;&gt; info device</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    ...</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    transportLockState: 0x01 (Transport Lock is set)</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    ...</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    &gt;&gt;&gt; transport unlock -h AA112233445566778899AABBCCDDEEFF</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    &gt;&gt;&gt; info device</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    A71CH in Debug Mode Version (SCP03 is not set up)</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    selectResponse:   0x0111</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    transportLockState: 0x02 (Open device, Transport Lock can no longer be set)</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    injectLockState:    0x02 (Unlocked)</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    gpStorageSize:      1024</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    uid (LEN=18):</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    47:90:70:02:47:91:12:10:20:89:00:50:36:91:64:23:00:00</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;## ucrt {#sec_a71chcfgtool_cmd_urct}</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;The \p ucrt \p command updates a certificate to the GP storage area by index. The certificate can be provided as raw data (-h option), </div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;as a file in PEM format (-p option) or as a file in DER format (-c option).</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    ucrt -x &lt;int&gt; [-c &lt;certfile.crt&gt; | -h &lt;hexvalue_data&gt; | -p &lt;certfile.pem&gt;]</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;\note In case the certificate to be written is in PEM format it will be stored into the A71CH in DER format. The valid index range for certificates is is limited only by memory size.</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;In the following \p ucrt example a certificate contained in a PEM file (c:\\certificate.pem) is stored into the A71CH at index 3.</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    &gt;&gt;&gt; ucrt -x 3 -p c:\certificate.pem</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    Filename: c:\certificate.pem</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    Certificate Size (DER format) = 493 byte</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;## wcrt {#sec_a71chcfgtool_cmd_wrct}</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;The \p wcrt \p command writes a certificate to the GP storage area by index. The certificate can be provided as raw data (-h option), </div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;as a file in PEM format (-p option) or as a file in DER format (-c option).</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    wcrt -x &lt;int&gt; [-c &lt;certfile.crt&gt; | -h &lt;hexvalue_data&gt; | -p &lt;certfile.pem&gt;] [-n &lt;padding-segments&gt;]</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;\note Writing to an existing index will fail. Use the \p ucrt \p command to update the certificate (taking into account certificate size constraints) or</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;use the \p ecrt \p command to erase and then write the new certificate. The valid index range for certificates is is limited only by memory size. Using padding</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;segments parameter creates an extra place holder for future updates with larger certificates at the same index without the need for erasing it first.</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;\note In case the certificate to be written is in PEM format it will be stored into the A71CH in DER format.</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;\note The \p rcrt \p command allows to read out a certificate by index.</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;In the following \p wcrt example a certificate contained in a PEM file (c:\\certificate.pem) is stored into the A71CH at index 3.</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    &gt;&gt;&gt; wcrt -x 3 -p c:\certificate.pem</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    Filename: c:\certificate.pem</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    Certificate Size (DER format) = 493 byte</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;# (5) Not connected mode {#sec_a71chcfgtool_mode_nc}</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;When starting up the A71CH Configure Tool it is possible to indicate no attached A71CH device</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;is required. This is achieved by preceding the command (on the command line only) by the keyword</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;\p nc (not connected).</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;Currently the only application of this feature is the creation of Reference Pem files</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;where the public key value is contained in a Pem file (containing an EC key pair) passed as argument.</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;The following command creates a reference pem file &#39;my_ref_keyfile.pem&#39;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;referring to a public key (stored or to be stored) at index 0 whose value is contained in &#39;kp_keyfile.pem&#39;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    root@imx6ulevk:~# ./a71chConfig_i2c_imx nc refpem -c 20 -x 0 -k kp_keyfile.pem -r my_ref_keyfile.pem</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    a71chConfig (Rev 0.94) .. NOT connecting to A71CH.</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    ECCPublicKey (LEN=65):</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    04:7C:59:16:D4:F5:46:B3:D3:17:20:78:F8:AD:41:84:9A:79:46:6B:5B:0B:FC:39:3D:4C:E1:A8:53:F5:4F:8D:</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    C2:98:65:F8:84:E9:9E:28:38:09:FF:29:34:B6:97:27:DB:6C:0A:F3:79:B0:D7:2C:16:25:B5:CB:B8:A2:CB:70:</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    89</div></div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>a71ch_configure_tool.md</b></li>
    <li class="footer">Generated on Fri Sep 7 2018 19:24:06 for A71CH Host Sw by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
